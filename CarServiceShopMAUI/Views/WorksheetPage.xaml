<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="CarServiceShopMAUI.Views.WorksheetPage"
             Title="Munkalap Kitöltése"
             xmlns:viewmodels="clr-namespace:CarServiceShopMAUI.ViewModels">
    <ScrollView>
        <VerticalStackLayout Spacing="16" Padding="16">
            <!-- Megrendelő -->
            <Frame BorderColor="#E0E0E0" CornerRadius="8">
                <VerticalStackLayout>
                    <Picker ItemsSource="{Binding Cars}" SelectedItem="{Binding SelectedCar}" Title="Autó kiválasztása"/>
                    <Picker ItemsSource="{Binding Services}" SelectedItem="{Binding SelectedService}" Title="Szerviz kiválasztása"/>
                    <Button Text="Munkalap nyomtatása (PDF)" Command="{Binding ExportPdfCommand}" />
                
                    <Label Text="Megrendelő adatai" FontAttributes="Bold" FontSize="20"/>
                    <Picker Title="Cég / Magánszemély" ItemsSource="{Binding CustomerTypeOptions}" SelectedItem="{Binding CustomerType}" />
                    <Entry Placeholder="Név" Text="{Binding CustomerName}" />
                    <Entry Placeholder="Cím" Text="{Binding CustomerAddress}" />
                    <Entry Placeholder="Telefonszám" Text="{Binding CustomerPhone}" />
                    <Entry Placeholder="Szig / Adószám" Text="{Binding CustomerIdentification}" />
                    <Picker Title="Tulajdonos / Üzembentartó / Meghatalmazott" ItemsSource="{Binding OwnerRoleOptions}" SelectedItem="{Binding OwnerRole}" />
                </VerticalStackLayout>
            </Frame>

            <!-- Jármű adatok -->
            <Frame BorderColor="#E0E0E0" CornerRadius="8">
                <VerticalStackLayout>
                    <Label Text="Jármű adatok" FontAttributes="Bold" FontSize="20"/>
                    <Entry Placeholder="Rendszám" Text="{Binding PlateNumber}" />
                    <Entry Placeholder="Gyártmány" Text="{Binding Brand}" />
                    <Entry Placeholder="Típus" Text="{Binding Type}" />
                    <Entry Placeholder="Km óra állás" Text="{Binding Mileage}" />
                    <Entry Placeholder="Alvázszám" Text="{Binding Vin}" />
                    <Entry Placeholder="Üzemanyagtartály" Text="{Binding FuelTankInfo}" />

                    <Label Text="Felszerelések, extrák" FontAttributes="Bold" Margin="10,0"/>
                    <Grid ColumnDefinitions="*,*,*" RowDefinitions="Auto,Auto,Auto,Auto">
                        <HorizontalStackLayout Spacing="5">
                            <CheckBox IsChecked="{Binding HasRegistration}" />
                            <Label Text="Forgalmi eng." VerticalOptions="Center" />
                        </HorizontalStackLayout>
                        <HorizontalStackLayout Spacing="5" Grid.Column="1">
                            <CheckBox IsChecked="{Binding HasInsurance}" />
                            <Label Text="Köt. bef." VerticalOptions="Center" />
                        </HorizontalStackLayout>
                        <HorizontalStackLayout Spacing="5" Grid.Column="2">
                            <CheckBox IsChecked="{Binding HasRadio}" />
                            <Label Text="Rádió" VerticalOptions="Center" />
                        </HorizontalStackLayout>

                        <HorizontalStackLayout Spacing="5" Grid.Row="1">
                            <CheckBox IsChecked="{Binding HasAntenna}" />
                            <Label Text="Antenna" VerticalOptions="Center" />
                        </HorizontalStackLayout>
                        <HorizontalStackLayout Spacing="5" Grid.Row="1" Grid.Column="1">
                            <CheckBox IsChecked="{Binding HasSpareWheel}" />
                            <Label Text="Pótkerék" VerticalOptions="Center" />
                        </HorizontalStackLayout>
                        <HorizontalStackLayout Spacing="5" Grid.Row="1" Grid.Column="2">
                            <CheckBox IsChecked="{Binding HasJack}" />
                            <Label Text="Emelő" VerticalOptions="Center" />
                        </HorizontalStackLayout>

                        <HorizontalStackLayout Spacing="5" Grid.Row="2">
                            <CheckBox IsChecked="{Binding HasWarningTriangle}" />
                            <Label Text="Elakadásjelző" VerticalOptions="Center" />
                        </HorizontalStackLayout>
                        <HorizontalStackLayout Spacing="5" Grid.Row="2" Grid.Column="1">
                            <CheckBox IsChecked="{Binding HasMedKit}" />
                            <Label Text="Eü. doboz" VerticalOptions="Center" />
                        </HorizontalStackLayout>
                        <HorizontalStackLayout Spacing="5" Grid.Row="2" Grid.Column="2">
                            <CheckBox IsChecked="{Binding HasBulbSet}" />
                            <Label Text="Izzó készlet" VerticalOptions="Center" />
                        </HorizontalStackLayout>

                        <HorizontalStackLayout Spacing="5" Grid.Row="3">
                            <CheckBox IsChecked="{Binding HasFireExtinguisher}" />
                            <Label Text="Tűzoltó készülék" VerticalOptions="Center" />
                        </HorizontalStackLayout>
                    </Grid>
                    <Editor Placeholder="Egyéb felszerelések, megjegyzés" Text="{Binding OtherCarItems}" HeightRequest="50"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Sérülés / Hibaleírás -->
            <Frame BorderColor="#E0E0E0" CornerRadius="8">
                <VerticalStackLayout>
                    <Label Text="Sérülés" FontAttributes="Bold" />
                    <Editor Placeholder="Részletek" Text="{Binding CarDamage}" HeightRequest="50"/>
                    <Label Text="Hiba leírás" FontAttributes="Bold" Margin="10,0"/>
                    <Editor Placeholder="Feladat / hiba leírása" Text="{Binding WorkDescription}" HeightRequest="70"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Alkatrész igény / Anyagok -->
            <Frame BorderColor="#E0E0E0" CornerRadius="8">
                <VerticalStackLayout>
                    <Label Text="Kiszerelt alkatrészekre igényt tart-e a megrendelő?" FontAttributes="Bold"/>
                    <StackLayout Orientation="Horizontal">
                        <RadioButton Content="Igen" IsChecked="{Binding WantsPartsBack}" />
                        <RadioButton Content="Nem" IsChecked="{Binding WantsPartsBack, Converter={StaticResource NegateBoolConverter}}" />
                    </StackLayout>
                    <Label Text="Megrendelő által átadott anyagok:" FontAttributes="Bold" Margin="10,0"/>
                    <Editor Placeholder="Anyagok, alkatrészek felsorolása" Text="{Binding SuppliedMaterials}" HeightRequest="50"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Határidő, költség -->
            <Frame BorderColor="#E0E0E0" CornerRadius="8">
                <VerticalStackLayout>
                    <Grid ColumnDefinitions="*,*" Margin="0,0,0,10">
                        <Label Text="Vállalási határidő:" Grid.Column="0"/>
                        <DatePicker Date="{Binding Deadline}" Grid.Column="1"/>
                    </Grid>
                    <Entry Placeholder="Várható javítási költség (nettó Ft)" Text="{Binding EstimatedNetCost}" />
                </VerticalStackLayout>
            </Frame>

            <!-- Nyilatkozat -->
            <Frame BorderColor="#E0E0E0" CornerRadius="8">
                <VerticalStackLayout>
                    <Label Text="Megrendelő nyilatkozata" FontAttributes="Bold"/>
                    <Editor Placeholder="Nyilatkozat szövege" Text="{Binding AcceptanceStatement}" HeightRequest="90"/>
                </VerticalStackLayout>
            </Frame>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>