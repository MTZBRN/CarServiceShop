<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="CarServiceShopMAUI.Views.PartDetailPage"
             Title="{Binding PageTitle}"
             BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}">

    <ScrollView>
        <Grid RowDefinitions="*,Auto" Padding="20">

            <!-- Main Content -->
            <VerticalStackLayout Grid.Row="0" Spacing="20">

                <!-- Header -->
                <Frame BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#2D2D2D}" 
                       Padding="15" CornerRadius="10" HasShadow="True">
                    <StackLayout Orientation="Horizontal" Spacing="10">
                        <Label Text="ðŸ”©" FontSize="24" VerticalOptions="Center"/>
                        <Label Text="{Binding PageTitle}" 
                               FontSize="18" FontAttributes="Bold" 
                               VerticalOptions="Center" TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                    </StackLayout>
                </Frame>

                <!-- Form Fields -->
                <VerticalStackLayout Spacing="15">

                    <!-- CikkszÃ¡m -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="CikkszÃ¡m *" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                        <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#3D3D3D}" 
                               Padding="0" CornerRadius="8" HasShadow="False" BorderColor="#DDD">
                            <Entry Text="{Binding PartNumber}" 
                                   Placeholder="pl. OIL-001"
                                   BackgroundColor="Transparent"
                                   Margin="10,0"/>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- NÃ©v -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="AlkatrÃ©sz neve *" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                        <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#3D3D3D}" 
                               Padding="0" CornerRadius="8" HasShadow="False" BorderColor="#DDD">
                            <Entry Text="{Binding Name}" 
                                   Placeholder="pl. Motorolaj 5W-30"
                                   BackgroundColor="Transparent"
                                   Margin="10,0"/>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- LeÃ­rÃ¡s -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="LeÃ­rÃ¡s" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                        <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#3D3D3D}" 
                               Padding="0" CornerRadius="8" HasShadow="False" BorderColor="#DDD">
                            <Editor Text="{Binding Description}" 
                                    Placeholder="OpcionÃ¡lis leÃ­rÃ¡s az alkatrÃ©szrÅ‘l..."
                                    BackgroundColor="Transparent"
                                    HeightRequest="100"
                                    AutoSize="TextChanges"
                                    Margin="10,5"/>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- MennyisÃ©g Ã©s NettÃ³ Ã¡r egy sorban -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15">

                        <!-- MennyisÃ©g -->
                        <VerticalStackLayout Grid.Column="0" Spacing="5">
                            <Label Text="MennyisÃ©g *" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                            <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#3D3D3D}" 
                                   Padding="0" CornerRadius="8" HasShadow="False" BorderColor="#DDD">
                                <Entry Text="{Binding Quantity}" 
                                       Keyboard="Numeric"
                                       Placeholder="1"
                                       BackgroundColor="Transparent"
                                       Margin="10,0"/>
                            </Frame>
                        </VerticalStackLayout>

                        <!-- NettÃ³ Ã¡r -->
                        <VerticalStackLayout Grid.Column="1" Spacing="5">
                            <Label Text="NettÃ³ Ã¡r (Ft) *" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                            <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#3D3D3D}" 
                                   Padding="0" CornerRadius="8" HasShadow="False" BorderColor="#DDD">
                                <Entry Text="{Binding NetPrice}" 
                                       Keyboard="Numeric"
                                       Placeholder="0"
                                       BackgroundColor="Transparent"
                                       Margin="10,0"/>
                            </Frame>
                        </VerticalStackLayout>
                    </Grid>

                    <!-- ÃFA kulcs -->
                    <VerticalStackLayout Spacing="5" Margin="0,10,0,0">
                        <Label Text="ÃFA kulcs" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                        <Entry Text="{Binding VatRate}"
                               IsReadOnly="True"
                               BackgroundColor="{AppThemeBinding Light=#eee, Dark=#666}"
                               Margin="0,0,0,10"/>
                    </VerticalStackLayout>

                    <!-- BruttÃ³ Ã¡r (szÃ¡mÃ­tott, csak olvashatÃ³) -->
                    <VerticalStackLayout Spacing="5" Margin="0,10,0,0">
                        <Label Text="BruttÃ³ Ã¡r (Ft)" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                        <Label Text="{Binding GrossPrice, StringFormat='{0:N0} Ft'}"
                               BackgroundColor="{AppThemeBinding Light=#eee, Dark=#666}" />

                    </VerticalStackLayout>

                </VerticalStackLayout>

            </VerticalStackLayout>

            <!-- Action Buttons -->
            <VerticalStackLayout Grid.Row="1" Spacing="10" Margin="0,20,0,10">

                <!-- Ã–sszesen kalkulÃ¡ciÃ³ -->
                <Frame BackgroundColor="{AppThemeBinding Light=#E8F5E8, Dark=#1B4D1B}" 
                       Padding="15" CornerRadius="8" HasShadow="False">
                    <StackLayout Orientation="Horizontal" HorizontalOptions="Center">
                        <Label Text="ðŸ’° Ã–sszesen: " FontAttributes="Bold" VerticalOptions="Center"/>
                        <Label Text="{Binding TotalPrice, StringFormat='{0:N0} Ft'}" 
                               FontAttributes="Bold" FontSize="16" 
                               TextColor="#2E7D32" VerticalOptions="Center"/>
                    </StackLayout>
                </Frame>

                <!-- Gombok -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                    <Button Grid.Column="0" 
                            Text="âœ… MentÃ©s" 
                            Command="{Binding SaveCommand}" 
                            BackgroundColor="#4CAF50" 
                            TextColor="White"
                            FontAttributes="Bold"
                            CornerRadius="25"
                            HeightRequest="50"/>

                    <Button Grid.Column="1" 
                            Text="âŒ MÃ©gse" 
                            Command="{Binding CancelCommand}" 
                            BackgroundColor="#F44336" 
                            TextColor="White"
                            FontAttributes="Bold"
                            CornerRadius="25"
                            HeightRequest="50"/>
                </Grid>

            </VerticalStackLayout>

        </Grid>
    </ScrollView>

</ContentPage>
