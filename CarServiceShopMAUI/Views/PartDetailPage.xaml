<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CarServiceShopMAUI.Views.PartDetailPage"
             Title="{Binding PageTitle}"
             BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}">
    
    <ScrollView>
        <Grid RowDefinitions="*,Auto" Padding="20">
            
            <!-- Main Content -->
            <VerticalStackLayout Grid.Row="0" Spacing="20">
                
                <!-- Header -->
                <Frame BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#2D2D2D}" 
                       Padding="15" CornerRadius="10" HasShadow="True">
                    <StackLayout Orientation="Horizontal" Spacing="10">
                        <Label Text="🔩" FontSize="24" VerticalOptions="Center"/>
                        <Label Text="{Binding PageTitle}" 
                               FontSize="18" FontAttributes="Bold" 
                               VerticalOptions="Center" TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                    </StackLayout>
                </Frame>

                <!-- Form Fields -->
                <VerticalStackLayout Spacing="15">
                    
                    <!-- Cikkszám -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Cikkszám *" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                        <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#3D3D3D}" 
                               Padding="0" CornerRadius="8" HasShadow="False" BorderColor="#DDD">
                            <Entry Text="{Binding PartNumber}" 
                                   Placeholder="pl. OIL-001"
                                   BackgroundColor="Transparent"
                                   Margin="10,0"/>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- Név -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Alkatrész neve *" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                        <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#3D3D3D}" 
                               Padding="0" CornerRadius="8" HasShadow="False" BorderColor="#DDD">
                            <Entry Text="{Binding Name}" 
                                   Placeholder="pl. Motorolaj 5W-30"
                                   BackgroundColor="Transparent"
                                   Margin="10,0"/>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- Leírás -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Leírás" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                        <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#3D3D3D}" 
                               Padding="0" CornerRadius="8" HasShadow="False" BorderColor="#DDD">
                            <Editor Text="{Binding Description}" 
                                    Placeholder="Opcionális leírás az alkatrészről..."
                                    BackgroundColor="Transparent"
                                    HeightRequest="100"
                                    AutoSize="TextChanges"
                                    Margin="10,5"/>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- Mennyiség és Ár egy sorban -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                        
                        <!-- Mennyiség -->
                        <VerticalStackLayout Grid.Column="0" Spacing="5">
                            <Label Text="Mennyiség *" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                            <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#3D3D3D}" 
                                   Padding="0" CornerRadius="8" HasShadow="False" BorderColor="#DDD">
                                <Entry Text="{Binding Quantity}" 
                                       Keyboard="Numeric"
                                       Placeholder="1"
                                       BackgroundColor="Transparent"
                                       Margin="10,0"/>
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Ár -->
                        <VerticalStackLayout Grid.Column="1" Spacing="5">
                            <Label Text="Egységár (Ft) *" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333, Dark=#CCC}"/>
                            <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#3D3D3D}" 
                                   Padding="0" CornerRadius="8" HasShadow="False" BorderColor="#DDD">
                                <Entry Text="{Binding Price}" 
                                       Keyboard="Numeric"
                                       Placeholder="0"
                                       BackgroundColor="Transparent"
                                       Margin="10,0"/>
                            </Frame>
                        </VerticalStackLayout>
                    </Grid>

                </VerticalStackLayout>

            </VerticalStackLayout>

            <!-- Action Buttons -->
            <VerticalStackLayout Grid.Row="1" Spacing="10" Margin="0,20,0,10">
                
                <!-- Összesen kalkuláció -->
                <Frame BackgroundColor="{AppThemeBinding Light=#E8F5E8, Dark=#1B4D1B}" 
                       Padding="15" CornerRadius="8" HasShadow="False">
                    <StackLayout Orientation="Horizontal" HorizontalOptions="Center">
                        <Label Text="💰 Összesen: " FontAttributes="Bold" VerticalOptions="Center"/>
                        <Label Text="{Binding TotalPrice, StringFormat='{0:N0} Ft'}" 
                               FontAttributes="Bold" FontSize="16" 
                               TextColor="#2E7D32" VerticalOptions="Center"/>
                    </StackLayout>
                </Frame>
                
                <!-- Gombok -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                    <Button Grid.Column="0" 
                            Text="✅ Mentés" 
                            Command="{Binding SaveCommand}" 
                            BackgroundColor="#4CAF50" 
                            TextColor="White"
                            FontAttributes="Bold"
                            CornerRadius="25"
                            HeightRequest="50"/>
                    
                    <Button Grid.Column="1" 
                            Text="❌ Mégse" 
                            Command="{Binding CancelCommand}" 
                            BackgroundColor="#F44336" 
                            TextColor="White"
                            FontAttributes="Bold"
                            CornerRadius="25"
                            HeightRequest="50"/>
                </Grid>
                
            </VerticalStackLayout>

        </Grid>
    </ScrollView>
    
</ContentPage>